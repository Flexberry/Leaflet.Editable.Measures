<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Leaflet.Editable based measure tools</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

<style>
  body { margin:0; padding:0; }
  #map { height: 400px; width:100%; }
  #tooltip {
    display: none;
    opacity: 0.5;
    padding: 10px;
    border: 1px dashed #999;
    font-family: sans-serif;
    font-size: 12px;
    height: 20px;
    line-height: 20px;
    z-index: 1000;
    }
</style>
<link rel="stylesheet" href="vendor//leaflet_1_0_0_rc2/leaflet.css" />
<script src="vendor/leaflet_1_0_0_rc2/leaflet-src.js"></script>
<script src="vendor/Leaflet.Editable/src/Leaflet.Editable.js"></script>

<!-- Measure scripts-->
<script src="leaflet_measure.js"></script>
<script src="leaflet_measure_marker.js"></script>
<script src="leaflet_measure_circle.js"></script>
<script src="leaflet_measure_polyline.js"></script>
<script src="leaflet_measure_polygon.js"></script>

</head>
<body>
<div id='map'></div>
<div id='tooltip' class='leaflet-tooltip'></div>
<button id="disableAllBtn" onclick="disableAllTools();">Выключить инструмент</button>
<button id="measureCoordinateBtn" onclick="enableMarkerTool();">Измерить координаты</button>
<button id="measureRadiusBtn" onclick="enableCircleTool();">Измерить радиус</button>
<button id="measureDistanceBtn" onclick="enablePolylineTool();">Измерить расстояние</button>
<button id="measureAreaBtn" onclick="enablePolygonTool();">Измерить площадь</button>
<script>
var centerPoint = [58.0060984592271,56.2445307230809];
// Create leaflet map.
var map = L.map('map', {editable: true}).setView(centerPoint, 12);

// Add OSM layer.
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

// Add layer group for user's measurements.
var measurementsLayerGroup = L.layerGroup().addTo(map);


// Create custom measere tools instances.
var markerTool = L.Measure.marker(map, { layerGroup: measurementsLayerGroup });
var circleTool = L.Measure.circle(map, { layerGroup: measurementsLayerGroup });
// var polylineTool = L.Measure.polyline(map, { layerGroup: measurementsLayerGroup });
// var polygonTool = L.Measure.polygon(map, { layerGroup: measurementsLayerGroup });

// Method to disable all custom measure tools.
var disableAllTools = function() {
  markerTool.disable();
//   circleTool.disable();
//   polylineTool.disable();
//   polygonTool.disable();
  };

// Method to enable custom coordinates measure tool.
var enableMarkerTool = function() {
  disableAllTools();
  markerTool.enable();
  };

// Method to enable custom radius measure tool.
var enableCircleTool = function() {
  disableAllTools();
  circleTool.enable();
  };

// Method to enable custom distance measure tool.
var enablePolylineTool = function() {
  disableAllTools();
  polylineTool.enable();
  };

// Method to enable custom area measure tool.
var enablePolygonTool = function() {
  disableAllTools();
  polygonTool.enable();
}

var tooltip = L.DomUtil.get('tooltip');

</script>
</body>
</html>
